# Mediator

#### 사전적 정의

> #### **mediator**
>
> 1. 조정자  2. 중재자  3. 중재인
>
> [*다음 영어사전*](https://alldic.daum.net/word/view.do?wordid=ekw000104030)



#### 이 패턴이 해결하려는 문제는?

> 서로를 직접 참조 (*및 업데이트*)하여 상호 작용하는 객체 집합 `Colleague1, Colleague2,…`을 정의하여, 객체 간에 많은 상호 연결한다면 다음과 같은 문제가 있다.
>
> - 객체가 서로 밀접하게 연결되어 객체를 변경하지 않으면서 상호 작용을 독립적으로 변경하기가 어렵다.
> - 밀접하게 결합된 객체는 여러가지 객체에 의존하기 때문에 구현, 변경, 테스트 및 재사용하기가 어렵다.

- 상호 작용하는 일련의 객체들 사이의 밀접한 결합을 어떻게 피할 수 있을까?
- 객체 간의 상호 작용을 어떻게 독립적으로 변경할 수 있을까?



### 이 패턴의 핵심 아이디어

- 일련의 객체가 상호 작용하는 방식을 캡슐화하는 객체 `mediator`를 정의한다.

- 이 패턴의 핵심 아이디어는 ***상호 작용을 제어하고 조정하는 mediator 오브젝트를 통해 오브젝트가 간접적으로 상호 작용하도록 한다***. 이는 단순한 중재자 인터페이스에만 의존하기 때문에 객체를 느슨한 결합을 가능하게 한다.

  -  느슨하게 결합된 오브젝트는 다른 오브젝트에 대한 종속성이 최소이므로 구현, 변경, 테스트 및 재사용이 더 쉽다.

  

> mediator를 추가하기 전에는 모든 객체들이 다른 객체들을 알아야하기 때문에, 서로 밀접하게 연관되어 있었다. mediator를 사용하면 서로 완전히 분리시킬 수 있다. 
>
> mediator에는 시스템을 제어할 수 있는 로직이 들어있고, 기존 객체에 새로운 규칙을 추가해야한다거나 새로운 객체를 시스템에 추가하더라도 mediator만 수정하면 된다. 



#### 언제 사용하나?

서로 관련된 객체 사이의 복잡한 통신과 제어를 한 곳으로 집중시키고 싶을 때 



#### 어떻게?

- 상태가 바뀔 때마다 mediator에게 알려준다

- mediator에서 보낸 요청에 응답한다

  

#### 장점

- 시스템과 각 객체를 분리시킴으로서 재사용성 증대
- 제어 로직을 한 군데 모아놓았기 때문에 관리 수월 
- 시스템에 들어있는 객체 사이에 오가는 메세지 종류를 줄이고 단순화 가능

- colleague 객체 분리
  -  colleague 객체는 `mediator 객체 / 인터페이스`를 통해 간접적으로 서로 상호 작용하며 서로에 대해 몰라도 된다.
    - 느슨하게 결합된 오브젝트는 구현, 변경 및 재사용이 더 쉽다.
    - 상호 작용 행동을 한 곳에 집중시킨다.
    - mediator 는 상호 작용하는 colleague 객체들간에 분배 될 상호 작용 동작을 캡슐화 (중앙 집중화)합니다.
    - 상호 작용 동작을 쉽게 변경할 수 있다.
    - 새 mediator (하위) 클래스를 추가하여 상호 작용 동작을 기존의 colleague 객체와 독립적으로 변경할 수 있다.

- 클래스 상속을 통해 컴파일 타임에 유연성을 제공한다.
  - 새로운 mediator를 정의하여 새로운 colleague 객체를 추가하고 기존 colleague 객체의 상호 작용 동작을 독립적으로 변경할 수 있다.



#### 단점

- 디자인을 잘 하지 못하면 mediator 객체 자체가 너무 복잡해질 수 있는 단점이 있음
  -  중재자가 일련의 객체의 상호 작용 동작을 캡슐화 `중앙 집중화 `하기 때문에 복잡해질 수 있다.
  - 로직의 복잡성과 colleague 객체의 수에 따라 복잡도 증가.
  -  "이 때문에 Mediator 클래스 자체의 유지보수가 어려워지게 될 때도 있습니다." [GoF, p364]



## 참고

- [GoF의 디자인 패턴](https://book.naver.com/bookdb/book_detail.nhn?bid=8942623) 
- [Head First Design Patterns](https://book.naver.com/bookdb/book_detail.nhn?bid=1882446)
- [The GoF Design Patterns Reference](http://www.w3sdesign.com/GoF_Design_Patterns_Reference0100.pdf)